<header class="header-container">
  <div class="header-content">
    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle md:hidden" 
            type="button" 
            (click)="toggleMobileMenu()"
            [attr.aria-expanded]="isMobileMenuOpen"
            aria-label="Toggle navigation">
      <i class="pi" [class]="isMobileMenuOpen ? 'pi-times' : 'pi-bars'"></i>
    </button>

    <!-- Logo Section -->
    <div class="logo-section">
      <a routerLink="/" class="logo-link">
        <img src="assets/images/logo.svg" alt="Saanjhi Creation" class="logo-image">
        <span class="logo-text hidden md:inline">Saanjhi Creation</span>
      </a>
    </div>

    <!-- Desktop Navigation -->
    <nav class="desktop-nav hidden md:flex">
      <ul class="nav-list">
        <li><a routerLink="/shop" routerLinkActive="active">Shop</a></li>
        <li><a routerLink="/categories" routerLinkActive="active">Categories</a></li>
        <li><a routerLink="/rental" routerLinkActive="active">Rental</a></li>
        <li><a routerLink="/about" routerLinkActive="active">About</a></li>
        <li><a routerLink="/contact" routerLinkActive="active">Contact</a></li>
      </ul>
    </nav>

    <!-- Action Buttons -->
    <div class="header-actions">
      <!-- Search (Desktop) -->
      <button class="action-btn search-btn hidden lg:flex" 
              type="button" 
              (click)="toggleSearch()"
              aria-label="Search">
        <i class="pi pi-search"></i>
      </button>

      <!-- Wishlist -->
      <button class="action-btn wishlist-btn" 
              type="button" 
              routerLink="/wishlist"
              aria-label="Wishlist">
        <i class="pi pi-heart"></i>
        <span class="badge" *ngIf="wishlistCount > 0">{{ wishlistCount }}</span>
      </button>

      <!-- Cart -->
      <button class="action-btn cart-btn" 
              type="button" 
              (click)="toggleCart()"
              aria-label="Shopping cart">
        <i class="pi pi-shopping-cart"></i>
        <span class="badge" *ngIf="cartCount > 0">{{ cartCount }}</span>
      </button>

      <!-- User Account -->
      <div class="user-menu" [class.open]="isUserMenuOpen">
        <button class="action-btn user-btn" 
                type="button" 
                (click)="toggleUserMenu()"
                aria-label="User menu">
          <i class="pi pi-user"></i>
        </button>
        
        <!-- User Dropdown -->
        <div class="user-dropdown" *ngIf="isUserMenuOpen">
          <div class="user-info" *ngIf="isLoggedIn">
            <span class="user-name">{{ userName }}</span>
            <span class="user-email">{{ userEmail }}</span>
          </div>
          
          <div class="dropdown-menu">
            <a *ngIf="!isLoggedIn" routerLink="/login" class="dropdown-item">
              <i class="pi pi-sign-in mr-2"></i>Login
            </a>
            <a *ngIf="!isLoggedIn" routerLink="/register" class="dropdown-item">
              <i class="pi pi-user-plus mr-2"></i>Register
            </a>
            
            <ng-container *ngIf="isLoggedIn">
              <a routerLink="/profile" class="dropdown-item">
                <i class="pi pi-user mr-2"></i>Profile
              </a>
              <a routerLink="/orders" class="dropdown-item">
                <i class="pi pi-list mr-2"></i>My Orders
              </a>
              <a routerLink="/rentals" class="dropdown-item">
                <i class="pi pi-calendar mr-2"></i>My Rentals
              </a>
              <hr class="dropdown-divider">
              <button type="button" class="dropdown-item" (click)="logout()">
                <i class="pi pi-sign-out mr-2"></i>Logout
              </button>
            </ng-container>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Search Bar (Mobile/Expanded) -->
  <div class="search-container" [class.expanded]="isSearchOpen">
    <div class="search-bar">
      <input type="text" 
             placeholder="Search products..." 
             class="search-input"
             [(ngModel)]="searchQuery"
             (keyup.enter)="onSearch()">
      <button type="button" 
              class="search-submit" 
              (click)="onSearch()"
              aria-label="Search">
        <i class="pi pi-search"></i>
      </button>
    </div>
  </div>

  <!-- Mobile Navigation -->
  <nav class="mobile-nav md:hidden" [class.open]="isMobileMenuOpen">
    <div class="mobile-nav-content">
      <!-- Search (Mobile) -->
      <div class="mobile-search mb-4">
        <div class="search-bar">
          <input type="text" 
                 placeholder="Search products..." 
                 class="search-input"
                 [(ngModel)]="searchQuery"
                 (keyup.enter)="onSearch()">
          <button type="button" 
                  class="search-submit" 
                  (click)="onSearch()">
            <i class="pi pi-search"></i>
          </button>
        </div>
      </div>

      <!-- Mobile Menu Items -->
      <ul class="mobile-nav-list">
        <li><a routerLink="/shop" (click)="closeMobileMenu()">Shop</a></li>
        <li><a routerLink="/categories" (click)="closeMobileMenu()">Categories</a></li>
        <li><a routerLink="/rental" (click)="closeMobileMenu()">Rental</a></li>
        <li><a routerLink="/about" (click)="closeMobileMenu()">About</a></li>
        <li><a routerLink="/contact" (click)="closeMobileMenu()">Contact</a></li>
      </ul>

      <!-- Mobile User Actions -->
      <div class="mobile-user-actions mt-4 pt-4 border-top-1 border-200">
        <div *ngIf="!isLoggedIn" class="flex flex-column gap-2">
          <a routerLink="/login" class="mobile-action-btn" (click)="closeMobileMenu()">
            <i class="pi pi-sign-in mr-2"></i>Login
          </a>
          <a routerLink="/register" class="mobile-action-btn" (click)="closeMobileMenu()">
            <i class="pi pi-user-plus mr-2"></i>Register
          </a>
        </div>
        
        <div *ngIf="isLoggedIn" class="flex flex-column gap-2">
          <a routerLink="/profile" class="mobile-action-btn" (click)="closeMobileMenu()">
            <i class="pi pi-user mr-2"></i>Profile
          </a>
          <a routerLink="/orders" class="mobile-action-btn" (click)="closeMobileMenu()">
            <i class="pi pi-list mr-2"></i>My Orders
          </a>
          <a routerLink="/rentals" class="mobile-action-btn" (click)="closeMobileMenu()">
            <i class="pi pi-calendar mr-2"></i>My Rentals
          </a>
          <button type="button" class="mobile-action-btn" (click)="logout()">
            <i class="pi pi-sign-out mr-2"></i>Logout
          </button>
        </div>
      </div>
    </div>
  </nav>

  <!-- Mobile Menu Overlay -->
  <div class="mobile-overlay" 
       [class.active]="isMobileMenuOpen" 
       (click)="closeMobileMenu()"></div>
</header>