<form [formGroup]="form" (ngSubmit)="save()" class="grid gap-3" *ngIf="!isLoading">
    <div class="col-12 md:col-6">
        <!-- Product Dropdown -->
        <saanjhi-ui-form-field label="Product" for="productId">
            <saanjhi-ui-product-select 
                inputId="productId" 
                formControlName="productId" 
                [multiple]="false"
                placeholder="Select product..."
                [showClear]="true"
                [filter]="true"
                [pageSize]="25"
                (productSelected)="onProductChange($event)">
            </saanjhi-ui-product-select>
        </saanjhi-ui-form-field>
    </div>

    <div class="col-12 md:col-6">
        <!-- Customer Dropdown -->
        <saanjhi-ui-form-field label="Customer" for="customerId">
            <saanjhi-ui-customer-select 
                inputId="customerId"
                formControlName="customerId" 
                [multiple]="false"
                placeholder="Select customer..."
                [showClear]="true"
                [filter]="true"
                [pageSize]="25"
                (customerSelected)="onCustomerChange($event)">
            </saanjhi-ui-customer-select>
        </saanjhi-ui-form-field>
    </div>

    <div class="col-12 md:col-6">
        <saanjhi-ui-form-field label="Customer Address" for="shippingAddressId">
            <saanjhi-ui-dropdown 
                inputId="shippingAddressId" 
                formControlName="shippingAddressId"
                [options]="shippingAddresses" 
                optionLabel="line1" 
                optionValue="id" 
                placeholder="Select Address" />
        </saanjhi-ui-form-field>
    </div>

    <div class="col-12 md:col-6">
        <saanjhi-ui-form-field label="Start Date" for="startDate">
            <p-datePicker formControlName="startDate" inputId="startDate" dateFormat="yy-mm-dd" />
        </saanjhi-ui-form-field>
    </div>

    <div class="col-12 md:col-6">
        <saanjhi-ui-form-field label="End Date" for="endDate">
            <p-datePicker formControlName="endDate" inputId="endDate" dateFormat="yy-mm-dd" />
        </saanjhi-ui-form-field>
    </div>

    <div class="col-12 md:col-6">
        <saanjhi-ui-form-field label="Rental Price" for="rentalPrice">
            <saanjhi-ui-input formControlName="rentalPrice" inputId="rentalPrice" type="number" />
        </saanjhi-ui-form-field>
    </div>

    <div class="col-12 md:col-6">
        <saanjhi-ui-form-field label="Security Deposit" for="securityDeposit">
            <saanjhi-ui-input formControlName="securityDeposit" inputId="securityDeposit" type="number" />
        </saanjhi-ui-form-field>
    </div>

    <div class="col-12">
        <saanjhi-ui-form-field label="Notes" for="notes">
            <saanjhi-ui-input formControlName="notes" inputId="notes" />
        </saanjhi-ui-form-field>
    </div>

    <div class="flex justify-content-end gap-2 mt-4">
        <saanjhi-ui-button type="button" severity="secondary" label="Cancel" (click)="cancel()" />
        <saanjhi-ui-button type="submit" label="Save" />
    </div>
</form>