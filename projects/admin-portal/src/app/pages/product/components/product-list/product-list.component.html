<p-card styleClass="mb-3">
    <form [formGroup]="filterForm" class="flex flex-wrap gap-2">
        <saanjhi-ui-form-control label="Search" inputId="search">
            <saanjhi-ui-input inputId="search" formControlName="search" placeholder="Search..."></saanjhi-ui-input>
        </saanjhi-ui-form-control>

        <saanjhi-ui-form-control label="Category" inputId="categoryIds">
            <saanjhi-ui-category-select [multiple]="true" inputId="categoryIds" formControlName="categoryIds">
            </saanjhi-ui-category-select>
            <!-- <saanjhi-ui-autocomplete formControlName="categoryIds" [dropdown]="true" [multiple]="true" [suggestions]="categories" optionLabel="name" optionValue="id"></saanjhi-ui-autocomplete> -->
        </saanjhi-ui-form-control>
    </form>
</p-card>

 <p-table [value]="products" [rows]="query.pageSize" [totalRecords]="totalCount" [lazy]="true" [loading]="isLoading"
    (onLazyLoad)="onPageChange($event)" [sortField]="query.sortBy" [sortOrder]="query.sortDesc ? -1 : 1"
    (sortFunction)="onSort($event)" [responsiveLayout]="'scroll'">

    <ng-template pTemplate="header">
        <tr>
            <th pSortableColumn="mainImage">Image</th>
            <th pSortableColumn="name">Name</th>
            <th pSortableColumn="sku">SKU</th>
            <th pSortableColumn="purchasePrice">Purchase Price</th>
            <th pSortableColumn="rentalPrice">Rental Price</th>
            <th pSortableColumn="securityDeposit">Security Deposit</th>
            <th pSortableColumn="availableSizes">Sizes</th>
            <th pSortableColumn="availableColors">Colors</th>
            <th pSortableColumn="isActive">Active</th>
            <th pSortableColumn="categoryName">Category</th>
            <th pSortableColumn="totalInventoryCount">Total Inventory</th>
            <th pSortableColumn="availableInventoryCount">Available Inventory</th>
            <th pSortableColumn="createdAt">Created</th>
            <th pSortableColumn="updatedAt">Updated</th>
            <th>Actions</th>
        </tr>
    </ng-template>

    <ng-template pTemplate="body" let-product>
        <tr>
            <td>
                <img *ngIf="product.mainImage?.thumbnailUrl" [src]="product.mainImage.thumbnailUrl" alt="Product"
                    width="48" height="48" />
            </td>
            <td>{{ product.name }}</td>
            <td>{{ product.sku }}</td>
            <td>{{ product.purchasePrice | appCurrency }}</td>
            <td>{{ product.rentalPrice | appCurrency }}</td>
            <td>{{ product.securityDeposit | appCurrency }}</td>
            <td>{{ product.availableSizes?.join(', ') }}</td>
            <td>{{ product.availableColors?.join(', ') }}</td>
            <td>{{ product.isActive ? 'Yes' : 'No' }}</td>
            <td>{{ product.categoryName }}</td>
            <td>{{ product.totalInventoryCount }}</td>
            <td>{{ product.availableInventoryCount }}</td>
            <td>{{ product.createdAt | date:'short' }}</td>
            <td>{{ product.updatedAt | date:'short' }}</td>
            <td>
                <p-button icon="pi pi-pencil" (click)="editProduct(product)" class="p-button-text"></p-button>
                <p-button icon="pi pi-trash" (click)="deleteProduct(product)" class="p-button-text"></p-button>
            </td>
        </tr>
    </ng-template>
</p-table>