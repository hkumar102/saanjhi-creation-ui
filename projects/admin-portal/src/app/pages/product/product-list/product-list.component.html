<!-- Header with Add Button -->
<div class="flex justify-content-between mb-4">
    <h2 class="text-xl font-bold">Product List</h2>
    <saanjhi-ui-button label="Add Product" icon="pi pi-plus" (click)="onAddProduct()" severity="info" />
</div>

<p-card styleClass="mb-4">
    <form [formGroup]="form" (ngSubmit)="onFilterChange()" class="flex flex-column gap-3">
        <div class="grid">
            <!-- Search Field -->
            <div class="col-12 md:col-6 lg:col-3">
                <saanjhi-ui-form-field label="Search" for="search">
                    <saanjhi-ui-input inputId="search" formControlName="search" placeholder="Search products..." />
                </saanjhi-ui-form-field>
            </div>

            <!-- Category Multi-Select -->
            <div class="col-12 md:col-6 lg:col-3">
                <saanjhi-ui-form-field label="Category" for="categoryIds">
                    <saanjhi-ui-category-select formControlName="categoryIds" placeholder="Select categories..."
                        [maxSelectedLabels]="2" selectedItemsLabel="{0} categories selected" [pageSize]="25"
                        [multiple]="true">
                    </saanjhi-ui-category-select>
                </saanjhi-ui-form-field>
            </div>

            <!-- Rentable Status -->
            <div class="col-12 md:col-6 lg:col-2">
                <saanjhi-ui-form-field label="Rentable" for="isRentable">
                    <saanjhi-ui-dropdown inputId="isRentable" formControlName="isRentable" [options]="[
                        { label: 'All', value: null },
                        { label: 'Rentable', value: true },
                        { label: 'Not Rentable', value: false }
                    ]" placeholder="Select Status" optionLabel="label" optionValue="value">
                    </saanjhi-ui-dropdown>
                </saanjhi-ui-form-field>
            </div>

            <!-- Active Status -->
            <div class="col-12 md:col-6 lg:col-2">
                <saanjhi-ui-form-field label="Availability" for="isActive">
                    <saanjhi-ui-dropdown inputId="isActive" formControlName="isActive" [options]="[
                        { label: 'All', value: null },
                        { label: 'Active', value: true },
                        { label: 'Inactive', value: false }
                    ]" placeholder="Select Status" optionLabel="label" optionValue="value">
                    </saanjhi-ui-dropdown>
                </saanjhi-ui-form-field>
            </div>
        </div>
        <!-- Action Buttons -->
        <div class="flex gap-2">

            <saanjhi-ui-button type="submit" label="Apply" severity="warn" icon="pi pi-filter" />
            <saanjhi-ui-button type="button" label="Clear" icon="pi pi-times" severity="secondary"
                (click)="onClearFilters()" />
        </div>
    </form>
</p-card>

<!-- Responsive Product Table -->
<p-card>

    <!-- Product Cards -->
    <div class="flex flex-wrap justify-content-start gap-2">
        <saanjhi-product-card *ngFor="let product of products()" [product]="product"
            (editClicked)="onEditClicked($event)" (previewClicked)="onPreviewProduct($event)">
        </saanjhi-product-card>
    </div>

    <!-- Load More Button -->
    <div class="flex justify-content-center mt-4">
        <saanjhi-ui-button label="Load More" icon="pi pi-angle-down" (click)="onLoadMore()" severity="secondary"
            [loading]="loading()" severity="warn" />
    </div>